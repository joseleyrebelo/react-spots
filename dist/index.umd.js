(function(o,f){typeof exports=="object"&&typeof module<"u"?f(exports,require("react/jsx-runtime"),require("react"),require("ts-util")):typeof define=="function"&&define.amd?define(["exports","react/jsx-runtime","react","ts-util"],f):(o=typeof globalThis<"u"?globalThis:o||self,f(o["react-spots"]={},o.jsxRuntime,o.React,o.tsUtil))})(this,function(o,f,u,d){"use strict";function x(i){const[e,s]=u.useState(i),r=u.useRef(void 0),c=u.useCallback((n,t)=>{r.current=t,s(n)},[]);return u.useEffect(()=>{r.current&&(r.current(e),r.current=void 0)},[e]),[e,c]}const S=(i,e)=>{const s=u.createContext(j(i,e)),r=b(s,i,e);return{Spot:s,SpotBounds:r,useSpot:t=>u.useContext(t||s),clone:()=>S(i,e)}},b=(i,e,s)=>function({children:c,...n}){return d.objKeys(n).forEach(t=>{d.isString(t)&&(e.states&&t in e.states?e.states[t]=n[t]:e.data&&t in e.data?e.data[t]=n[t]:e.middleware&&t in e.middleware&&(e.middleware[t]=n[t]))}),f.jsx(i.Provider,{value:j(e,s,!0),children:c})},j=(i,e,s=!1)=>{const{states:r,middleware:c}=i;return{...i,...e,...r&&d.objKeys(r).reduce((n,t)=>{let a=r[t],p=()=>{};return s&&([a,p]=x(r[t])),{...n,states:{...n.states,[t]:a},setStates:{...n.setStates,[`set${d.capitalize(t)}`]:p}}},{}),...c&&d.objKeys(c).reduce((n,t)=>({...n,[t]:c[t]}),{}),...e&&d.objKeys(e).reduce((n,t)=>({...n,[t]:function(...a){return e[t](this,...a)}}),{}),isLive:s}};o.newSpot=S,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
